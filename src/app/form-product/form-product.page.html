<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title></ion-title>
    <ion-buttons slot="end">
      <ion-menu-button menu="m1"></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ title }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <ion-list>
      <ion-item>
        <ion-label position="stacked">Nombre</ion-label>
        <ion-input
          placeholder="Ingresa el nombre del producto"
          formControlName="name"
          type="text"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Precio</ion-label>
        <ion-input
          placeholder="Ingresa un valor"
          formControlName="price"
          type="number"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Descripción</ion-label>
        <ion-textarea
          placeholder="Ingresa una descripción"
          formControlName="description"
        ></ion-textarea>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Cargar Imagen</ion-label>
        <input
          type="file"
          accept="image/*"
          (change)="onFileSelected($event)"
          style="
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
          "
        />
        <div
          *ngIf="selectedFile"
          style="margin-top: 8px; color: #666; font-size: 14px"
        >
          Archivo seleccionado: {{ selectedFile.name }}
        </div>
      </ion-item>
    </ion-list>

    <!-- Botón de envío -->
    <div style="padding: 20px">
      <ion-button
        expand="block"
        type="submit"
        [disabled]="form.invalid"
        [color]="isEditMode ? 'warning' : 'primary'"
      >
        {{ isEditMode ? 'Actualizar Producto' : 'Agregar Producto' }}
      </ion-button>

      <!-- Botón cancelar para modo edición -->
      <ion-button
        *ngIf="isEditMode"
        expand="block"
        fill="outline"
        color="medium"
        (click)="router.navigate(['/products'])"
        style="margin-top: 10px"
      >
        Cancelar
      </ion-button>
    </div>
  </form>
</ion-content>
